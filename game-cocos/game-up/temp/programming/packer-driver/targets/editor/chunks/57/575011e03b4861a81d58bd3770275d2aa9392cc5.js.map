{"version":3,"sources":["file:///Users/chenchao/code/person/game-upgradation/game-cocos/game-up/assets/login.ts"],"names":["_decorator","Component","EditBox","Node","SocketClient","RequestCommand","UserCmdModule","encodeLoginReq","LogUtils","ccclass","property","login","account","password","start","ins","connect","init","accountInput","node","on","editbox","string","passwordInput","EventType","MOUSE_DOWN","loginHandler","TOUCH_START","event","info","MAIN_CMD","LOGIN","name","res","log","responseStatus","warn","execute","onLoad","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAQA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,O,OAAAA,O;AAASC,MAAAA,I,OAAAA,I;;AACjCC,MAAAA,Y;;AACAC,MAAAA,c;;AACCC,MAAAA,a,iBAAAA,a;;AACAC,MAAAA,c,iBAAAA,c;;AACDC,MAAAA,Q;;;;;;;;;OAGD;AAACC,QAAAA,OAAD;AAAUC,QAAAA;AAAV,O,GAAsBV,U;;uBAGfW,K,WADZF,OAAO,CAAC,OAAD,C,UAGHC,QAAQ,CAACR,OAAD,C,UAKRQ,QAAQ,CAACR,OAAD,C,2BARb,MACaS,KADb,SAC2BV,SAD3B,CACqC;AAAA;AAAA;;AAAA;;AAAA,eAKjCW,OALiC,GAKf,EALe;;AAAA;;AAAA,eAUjCC,QAViC,GAUd,EAVc;AAAA;;AAYjCC,QAAAA,KAAK,GAAG;AACJ;AAAA;AAAA,4CAAaC,GAAb,CAAiBC,OAAjB;AACA;AAAA;AAAA,gDAAeC,IAAf,CAAoB;AAAA;AAAA,4CAAaF,GAAjC;AAEA,eAAKG,YAAL,CAAkBC,IAAlB,CAAuBC,EAAvB,CAA0B,mBAA1B,EAAgDC,OAAD,IAAa;AACxD,iBAAKT,OAAL,GAAeS,OAAO,CAACC,MAAvB;AACH,WAFD,EAEG,IAFH;AAGA,eAAKC,aAAL,CAAmBJ,IAAnB,CAAwBC,EAAxB,CAA2B,mBAA3B,EAAiDC,OAAD,IAAa;AACzD,iBAAKR,QAAL,GAAgBQ,OAAO,CAACC,MAAxB;AACH,WAFD,EAEG,IAFH,EAPI,CAWJ;;AACA,eAAKH,IAAL,CAAUC,EAAV,CAAajB,IAAI,CAACqB,SAAL,CAAeC,UAA5B,EAAwC,KAAKC,YAA7C,EAA2D,IAA3D;AACA,eAAKP,IAAL,CAAUC,EAAV,CAAajB,IAAI,CAACqB,SAAL,CAAeG,WAA5B,EAAyC,KAAKD,YAA9C,EAA4D,IAA5D;AAEH;;AAEDA,QAAAA,YAAY,CAACE,KAAD,EAAQ;AAChB,cAAI,KAAKhB,OAAL,IAAgB,KAAKC,QAAzB,EAAmC;AAC/B;AAAA;AAAA,sCAASgB,IAAT,CAAe,MAAK,KAAKjB,OAAQ,MAAK,KAAKC,QAAS,EAApD;AACA;AAAA;AAAA,kDACI;AAAA;AAAA,gDAAciB,QADlB,EAEI;AAAA;AAAA,gDAAcC,KAFlB,EAGI,MAAM;AACF,qBAAO;AAAA;AAAA,oDAAe;AAACC,gBAAAA,IAAI,EAAE,KAAKpB,OAAZ;AAAqBC,gBAAAA,QAAQ,EAAE,KAAKA;AAApC,eAAf,CAAP;AACH,aALL,EAMKoB,GAAD,IAA0B;AACtB;AAAA;AAAA,wCAASC,GAAT,CAAaD,GAAb;;AACA,kBAAIA,GAAG,CAACE,cAAJ,KAAuB,CAA3B,EAA8B;AAC1B;AAAA;AAAA,0CAASN,IAAT,CAAc,MAAd;AACH,eAFD,MAEO;AACH;AAAA;AAAA,0CAASO,IAAT,CAAc,MAAd,EAAsBH,GAAG,CAACE,cAA1B;AACH;AACJ,aAbL,EAcEE,OAdF;AAeH;AACJ;;AAEDC,QAAAA,MAAM,GAAG;AACL;AAAA;AAAA,oCAASJ,GAAT,CAAa,QAAb;AACH;;AAEDK,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAxDgC,O;;;;;iBAGF,I;;;;;;;iBAKC,I","sourcesContent":["import {_decorator, Component, EditBox, Node} from 'cc';\nimport SocketClient from \"db://assets/iogame/SocketClient\";\nimport RequestCommand from \"db://assets/iogame/RequestCommand\";\nimport {UserCmdModule} from \"db://assets/iogame/cmd/CmdModule\";\nimport {encodeLoginReq} from \"db://assets/iogame/pb/user/User\";\nimport LogUtils from \"db://assets/iogame/LogUtils\";\nimport {ExternalMessage} from \"db://assets/iogame/pb/ExternalMessage\";\n\nconst {ccclass, property} = _decorator;\n\n@ccclass('login')\nexport class login extends Component {\n\n    @property(EditBox)\n    accountInput: EditBox | null = null;\n\n    account: string = '';\n\n    @property(EditBox)\n    passwordInput: EditBox | null = null;\n\n    password: string = '';\n\n    start() {\n        SocketClient.ins.connect();\n        RequestCommand.init(SocketClient.ins);\n\n        this.accountInput.node.on('editing-did-ended', (editbox) => {\n            this.account = editbox.string\n        }, this)\n        this.passwordInput.node.on('editing-did-ended', (editbox) => {\n            this.password = editbox.string\n        }, this)\n\n        // 登录按钮\n        this.node.on(Node.EventType.MOUSE_DOWN, this.loginHandler, this)\n        this.node.on(Node.EventType.TOUCH_START, this.loginHandler, this)\n\n    }\n\n    loginHandler(event) {\n        if (this.account && this.password) {\n            LogUtils.info(`登录：${this.account} + ${this.password}`)\n            new RequestCommand(\n                UserCmdModule.MAIN_CMD,\n                UserCmdModule.LOGIN,\n                () => {\n                    return encodeLoginReq({name: this.account, password: this.password});\n                },\n                (res: ExternalMessage) => {\n                    LogUtils.log(res)\n                    if (res.responseStatus === 0) {\n                        LogUtils.info('登录成功')\n                    } else {\n                        LogUtils.warn('登录失败', res.responseStatus)\n                    }\n                }\n            ).execute();\n        }\n    }\n\n    onLoad() {\n        LogUtils.log('onload')\n    }\n\n    update(deltaTime: number) {\n\n    }\n}\n\n"]}